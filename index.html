<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<title>ğŸµ å¯æ„›å³æ™‚æŸ¥æ­Œ</title>

<style>
/* ====== æ•´é«”å¯æ„›é¢¨æ ¼ ====== */
body {
    font-family: "Noto Sans TC", sans-serif;
    background: linear-gradient(135deg, #ffe4f0, #e0f7ff);
    min-height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

.card {
    background: #fff;
    width: 420px;
    max-height: 80vh;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,.15);
    display: flex;
    flex-direction: column;
}

h1 {
    text-align: center;
    margin: 0 0 10px;
}

input {
    padding: 12px;
    border-radius: 12px;
    border: 2px solid #ffd3e2;
    outline: none;
    font-size: 16px;
}

input:focus {
    border-color: #ff8fb1;
}

/* ====== çµæœå€ ====== */
.result {
    margin-top: 15px;
    overflow-y: auto;
}

.item {
    background: #fff5f9;
    border-radius: 12px;
    padding: 10px;
    margin-bottom: 8px;
    animation: fadeIn .2s ease;
}

.song {
    font-weight: bold;
}

.artist {
    font-size: 14px;
    color: #666;
}

/* å°å‹•ç•« */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to   { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>
<div class="card">
    <h1>ğŸ§ å³æ™‚æŸ¥æ­Œ</h1>
    <input id="kw" placeholder="è¼¸å…¥æ­Œå / æ­Œæ‰‹â€¦" />
    <div class="result" id="result"></div>
</div>

<script>
/* =========================
   Google Sheet è¨­å®š
   ========================= */
const SHEET_ID = '1QKdoY1acqW-tqk2K5CJZAzC-mtiUpKzWyE6eVfLbZ34';
const GID = 0;

// CSV ä¾†æºï¼ˆæ¯æ¬¡åˆ·æ–°éƒ½æœƒé‡æ–°æŠ“ï¼‰
const CSV_URL =
    `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${GID}`;

/* =========================
   è³‡æ–™è¼‰å…¥
   ========================= */
let songs = [];

async function loadSongs() {
    const res = await fetch(CSV_URL);
    const text = await res.text();

    const rows = text.trim().split('\n').map(r => r.split(','));
    const headers = rows[0];

    // å°‡æ¯ä¸€åˆ—è½‰æˆç‰©ä»¶ï¼ˆæ¬„ä½å â†’ å€¼ï¼‰
    songs = rows.slice(1).map(r => {
        const obj = {};
        headers.forEach((h, i) => obj[h] = r[i] || '');
        return obj;
    });
}

loadSongs();

/* =========================
   å³æ™‚æœå°‹
   ========================= */
const input = document.getElementById('kw');
const resultBox = document.getElementById('result');

input.addEventListener('input', () => {
    const kw = input.value.trim();
    resultBox.innerHTML = '';

    if (!kw) return;

    const matched = songs.filter(song =>
        Object.values(song).some(v => v.includes(kw))
    );

    matched.forEach(song => {
        const div = document.createElement('div');
        div.className = 'item';

        div.innerHTML = `
            <div class="song">ğŸµ ${song['æ­Œå'] || ''}</div>
            <div class="artist">ğŸ‘¤ ${song['æ­Œæ‰‹'] || ''}</div>
            <div class="artist">${song['å‚™è¨»'] || ''}</div>
        `;

        resultBox.appendChild(div);
    });
});
</script>
</body>
</html>
